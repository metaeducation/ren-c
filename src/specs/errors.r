Rebol [
    system: "Rebol [R3] Language Interpreter and Run-time Environment"
    title: "Standard Error IDs and Display Templates"
    rights: --[
        Copyright 2012 REBOL Technologies
        Copyright 2012-2018 Ren-C Open Source Contributors
        REBOL is a trademark of REBOL Technologies
    ]--
    license: --[
        Licensed under the Apache License, Version 2.0.
        See: http://www.apache.org/licenses/LICENSE-2.0
    ]--
    purpose: --[
        This specifies error categories and IDs that are given SYM_XXX
        constants and can be evoked using those numbers by C code.

        The errors map to either a TEXT! string, or a BLOCK! with GET-WORD!
        slots showing where argument substitution will go.  Traditionally
        these arguments were named :arg1, :arg2, :arg3...however an idea
        emerging is that error contexts will ultimately use their data
        members to be meaningfully-named arguments for that error ID.

        As a convenience for invoking the errors correctly from C with the
        right number of arguments, see the Error_Xxx_Yyy_Raw() functions
        auto-generated by %make-boot.r.

        Because error callsites only name the ID and category of the error,
        the messages are stored in an "errors catalog".  For this reason,
        standard errors evoked from usermode as well as C are found here.

        !!! TBD: way of extending the error catalog and managing the
        ecology of identity of new errors (possibly via URL uniqueness).

        !!! TBD: way of cleaning up errors not referenced from the code.
    ]--
]


internal: [
    ; !!! Should there be a distinction made between different kinds of
    ; stack overflows?  (Call stack, Data stack?)
    ;
    stack-overflow:     "stack overflow"

    no-memory:          ["not enough memory:" :arg1 "bytes"]

    io-error:           "problem with IO"
    locked-series:      "locked series expansion"
    unexpected-case:    "no case in switch statement"
    bad-path:           ["bad path:" :arg1]
    not-here:           [:arg1 "not supported on your system"]
    globals-full:       "no more global variable space"
    bad-sys-func:       ["invalid or missing system function:" :arg1]
    invalid-error:      ["error object or fields were not valid:" :arg1]
    hash-overflow:      "Hash ran out of space"

    checked-build-only: "Feature available only in RUNTIME_CHECKS builds"

    invalid-exit:       "Frame does not exist on the stack to EXIT from"
]

syntax: [
    scan-invalid:       ["invalid" :arg1 "--" :arg2]
    scan-missing:       ["missing" :arg1]
    scan-extra:         ["extra" :arg1]
    scan-mismatch:      ["expected" :arg1 "but got" :arg2]

    no-header:          ["script is missing a REBOL header:" :arg1]
    bad-header:         ["script header is not valid:" :arg1]
    bad-compress:       ["compressed script body is not valid:" :arg1]
    malconstruct:       ["invalid construction spec:" :arg1]
    bad-char:           ["invalid character in:" :arg1]
    needs:              ["this script needs" :arg1 :arg2 "or better to run correctly"]
]

script: [
    no-value:           "No value in antiform BLOCK! pack: ~[]~ (VOID)"
    bad-null:           [:arg1 "cannot be null"]
    bad-word-get:       [:arg1 "is" :arg2 "antiform (see ^^(...) and GET:ANY)"]
    bad-antiform:       ["Invalid use of" :arg1 "antiform"]
    non-isotopic-type:  ["Quasiforms and antiforms not legal for value:" :arg1]
    illegal-keyword:    ["Illegal antiform keyword:" :arg1]
    bad-void:           "Invalid use of void"
    need-non-end:       ["end was reached evaluating" :arg1]  ; SET-XXX!/SIGIL!
    not-bound:          [:arg1 "word is not bound to a context"]
    not-in-context:     [:arg1 "is not in the specified context"]

    trash-condition:    ["Can't conditionally test TRASH!:" :arg1]
    keyword-condition:  ["Invalid antiform WORD! for conditional test:" :arg1]

    collectable-bound:  ["Collectable" :arg1 "bound, use :PREBOUND if intended"]
    assertion-failure:  ["assertion failure:" :arg1]

    ; NOTE: Preallocated errors
    ;
    done:               "Enumeration exhausted"
    veto:               "Cancel operation"

    yielder-panicked:   "Can't run a Yielder that has abruptly panicked"
    yielder-reentered:  "Can't re-entrantly call a Yielder not in YIELD state"

    ; NOTE: Preallocated errors for quick UTF-8 failing
    ;
    overlong-utf8:      "Invalid or overlong UTF-8 encoding detected"
    utf8-too-short:     "UTF-8 data too short for required trail bytes"
    codepoint-too-high: "Points over Plane 17 (> 0x10FFFF) illegal in UTF-8"
    codepoint-negative: "Negative codepoints not legal"
    no-utf8-surrogates: "UTF-16 surrogate values illegal in UTF-8"
    illegal-zero-byte:  "#{00} bytes illegal in ANY-STRING?, use BLOB!"
    utf8-trail-bad-bit: "UTF-8 trailing bytes without high bit set"

    bad-utf8:           "invalid UTF-8 byte sequence found during decoding"
    illegal-cr:         ["Illegal CR: See DELINE, and TO-TEXT:RELAX --" :arg1]
    mixed-cr-lf-found:  "DELINE requires files to be CR LF or LF consistently"
    bad-utf8-bin-edit:  "String aliased as BLOB! can't become invalid UTF-8"
    not-one-codepoint:  "Character data must be one UTF-8 codepoint"

    find-string-binary: "Can't search binary in string (must convert input)"

    expect-val:         ["expected" :arg1 "not" :arg2]
    expect-type:        [:arg1 :arg2 "field must be of type" :arg3]
    cannot-use:         ["cannot use" :arg1 "on" :arg2 "value"]

    no-binding:         ["Couldn't get binding for" :arg1]

    ambiguous-infix:    "Ambiguous infix expression--use GROUP! to clarify"
    literal-left-path:  "Use ->- to pass literal left PATH! parameters right"

    surprising-action:  ["Surprising ACTION! assign to" :arg1 "^^ to APPROVE"]

    sequence-too-short: "PATH!, CHAIN!, and TUPLE! must have more than 2 items"
    conflated-sequence: ["Sequence would conflate with" :arg1 "--" :arg2]
    bad-sequence-space: "SPACE only legal at head and tail of sequence"
    bad-sequence-item:  ["Value is not a valid" :arg1 "element:" :arg2]
    bad-sequence-head:  ["Value is not a valid sequence head:" :arg2]

    bad-sigil:          ["Value can't carry a Sigil [$ @ ^^]:" :arg1]

    cant-decorate-type: ["Cannot apply `:` or `^` decoration to:" :arg1]

    action-with-dotted: "ACTION! used with dotted sequence access form"
    inert-with-slashed: "ANY-INERT? used with slashed sequence access form"

    bad-get-group:      ["GROUP!s require :GROUPS in GET or SET:" :arg1]
    bad-set-group:      "SET-GROUP! sets WORD!/TUPLE!/BLOCK!"

    bad-branch-type:    "Bad branch type"

    do-running-frame:   ["Must COPY a FRAME! that's RUNNING? before DOing it"]
    expired-frame:      ["Cannot use a FRAME! whose stack storage expired"]

    apply-too-many:     "Too many values in APPLY argument block (see :RELAX)"

    hijack-blank:       "Hijacked function was captured but no body given yet"

    type-of-null:       "TYPE OF NULL requested (use TRY if intentional)"

    evaluative-quote:   "Can't quote non-literal from an evaluative source"

    nontrivial-panic:   "PANIC requires complex expressions to be in a GROUP!"

    ; BAD-VALUE is the laziest error with an argument.  BAD-ARGUMENT now
    ; tells you what the parameter of the argument was for.

    unknown-error:      "Unknown error (failure on null, no additional info)"
    bad-value:          ["Failure on bad value (no additional info):" :arg1]

    invalid-arg:        [:arg1 "has an invalid" :arg2 "argument:" :arg3]
    no-arg:             [:arg1 "is missing its" :arg2 "argument"]
    unspecified-arg:    [:arg1 "has" :arg2 "unspecified (~ antiform)"]

    unset-variable:     ["Unset variable:" :arg1]

    ; These need to have the same arguments (shared code coerces them)
    ;
    expect-arg:         [:arg1 "expects" :arg2 "for its" :arg3 "argument"]
    phase-expect-arg:
        [:arg1 "internal phase expects" :arg2 "for its" :arg3 "argument"]

    no-logic-typecheck: [:arg1 "must return LOGIC? to use in typechecking"]
    no-arg-typecheck:   [:arg1 "must take an argument to use in typechecking"]

    invalid-type:       [:arg1 "type is not allowed here"]
    invalid-op:         ["invalid operator:" :arg1]
    no-op-arg:          [:arg1 "operator is missing an argument"]
    invalid-data:       ["data not in correct format:" :arg1]
    not-same-type:      "values must be of the same type"
    not-related:        ["incompatible argument for" :arg1 "of" :arg2]
    bad-func-def:       ["invalid function definition:" :arg1]
    bad-func-arg:       ["function argument" :arg1 "is not valid"]

    bad-return-type:    [:arg1 "can't RETURN" :arg2 "but rather" :arg3]

    no-refine:          [:arg1 "has no refinement called" :arg2]
    bad-refines:        "incompatible or invalid refinements"
    bad-parameter:      ["incompatible or duplicate parameter:" :arg1]
    bad-argless-refine: ["Argless Refinement" :arg1 "Must be either # or NULL"]

    bad-field-set:      ["cannot set" :arg1 "field to" :arg2 "datatype"]
    bad-pick:           ["cannot pick" :arg1]
    bad-poke:           ["cannot poke" :arg1]
    bad-poke-dual:      ["poke of dual signal incompatible with target" :arg1]
    dup-vars:           ["duplicate variable specified:" :arg1]

    expression-barrier: "expression barrier hit while fulfilling argument"

    index-out-of-range: "series index before head or after tail"
    type-has-no-index:  ["Datatype" :arg1 "does not have an internal index"]

    missing-arg:        "missing a required argument or refinement"
    too-short:          "content too short (or just whitespace)"
    too-long:           "content too long"
    invalid-chars:      "contains invalid characters"
    invalid-compare:    ["cannot compare" :arg1 "with" :arg2]

    invalid-part:       ["invalid :part count:" :arg1]

    no-return:          "block did not return a value"

    ; !!! Consider enhancements which would allow suppressing the /NAME in the
    ; rendering if not present.
    ;
    no-catch:           ["No CATCH for THROW of" :arg1 "with /NAME:" :arg2]

    bad-bad:            [:arg1 "error:" :arg2]

    bad-make-arg:       ["cannot MAKE/TO" :arg1 "from:" :arg2]
    wrong-denom:        [:arg1 "not same denomination as" :arg2]
;   bad-convert:        ["invalid conversion value:" :arg1]
    bad-compression:    ["invalid compressed data - problem:" :arg1]
    dialect:            ["incorrect" :arg1 "dialect usage at:" :arg2]
    bad-command:        "invalid command format (extension function)"
    bad-cast:           ["cannot cast" :arg1 "as" :arg2]
    alias-constrains:   ["AS constrains unlocked input, so must be mutable"]

    nothing-to-take:    "Can't TAKE, no value available (consider TRY TAKE)"
    archetype-invoked:  "Archetypal function invoked, no target context"

    parse3-rule:        "PARSE3 - invalid rule or usage of rule"
    parse3-end:         "PARSE3 - unexpected end of rule"
    parse3-variable:    ["PARSE3 - expected a variable, not:" :arg1]
    parse3-command:     ["PARSE3 - command cannot be used as variable:" :arg1]
    parse3-series:      ["PARSE3 - input must be a series:" :arg1]
    parse3-multi-set:   "PARSE3 - SET can capture at most one value"
    parse3-incomplete:  "PARSE3 rules did not reach end of input"

    block-skip-wrong:   "Block is not even multiple of skip size"

    frame-already-used: ["Frame currently in use by a function call" :arg1]
    frame-not-on-stack: "Frame is no longer running on the stack"
    stale-frame:        "Original FRAME! can't be reused/viewed after invoking"

    varargs-no-stack:   "Call originating VARARGS! has finished running"
    varargs-make-only:  "MAKE *shared* BLOCK! supported on VARARGS! (not TO)"
    varargs-no-look:    "VARARGS! may only lookahead by 1 when hard literal"
    varargs-take-last:  "VARARGS! does not support TAKE-ing only :LAST item"

    null-vararg-list:   "Can't MAKE ANY-LIST? from VARARGS! allowing ~null~"
    anti-object-block:  "Can't create block from object if it has antiforms"

    conflicting-key:    [:arg1 "key conflicts; use SELECT or PUT with :CASE"]

    non-block-branch:   ["Evaluated non-block/function used as branch" :arg1]

    native-unloaded:    ["Native has been unloaded:" :arg1]
]

math: [
    zero-divide:        "attempt to divide by zero"
    overflow:           "math or number overflow"
    positive:           "positive number required"

    type-limit:         [:arg1 "overflow/underflow"]
    size-limit:         ["maximum limit reached:" :arg1]
    out-of-range:       ["value out of range:" :arg1]
]

access: [
    protected-word:     ["variable" :arg1 "locked by PROTECT (see UNPROTECT)"]

    const-value:        ["CONST or iterative value (see MUTABLE):" :arg1]

    series-protected:   "series read-only due to PROTECT (see UNPROTECT)"
    series-frozen:      "series is permanently frozen, can't modify"
    series-held:        "series has temporary read-only hold for iteration"
    series-auto-frozen: "series was implicitly frozen (e.g. as key for MAP!)"

    series-data-freed:  "series contents no longer available due to FREE"

    hidden:             "not allowed - would expose or modify hidden values"

    cannot-open:        ["cannot open:" :arg1 "reason:" :arg2]
    not-open:           ["port is not open:" :arg1]
    already-open:       ["port is already open:" :arg1]
;   already-closed:     ["port" :arg1 "already closed"]
    no-connect:         ["cannot connect:" :arg1 "reason:" :arg2]
    not-connected:      ["port is not connected:" :arg1]
;   socket-open:        ["error opening socket:" :arg1]
    no-script:          ["script not found:" :arg1]

    no-scheme-name:     "Scheme has no `name:` field (must be WORD!)"
    no-scheme:          ["missing port scheme:" :arg1]

    invalid-spec:       ["invalid spec or options:" :arg1]
    invalid-port:       ["invalid port object (invalid field values)"]
    invalid-actor:      ["invalid port actor (must be native or object)"]
    invalid-port-arg:   ["invalid port argument:" :arg1]
    no-port-action:     ["this port does not support:" :arg1]
    protocol:           ["protocol error:" :arg1]
    invalid-check:      ["invalid checksum (tampered file):" :arg1]

    write-error:        ["write failed:" :arg1 "reason:" :arg2]
    read-error:         ["read failed:" :arg1 "reason:" :arg2]
    read-only:          ["read-only - write not allowed:" :arg1]
    timeout:            ["port action timed out:" :arg1]

    no-create:          ["cannot create:" :arg1]
    no-delete:          ["cannot delete:" :arg1]
    no-rename:          ["cannot rename:" :arg1]
    bad-file-path:      ["bad file path:" :arg1]
    bad-file-mode:      ["bad file mode:" :arg1]
;   protocol:           ["protocol error" :arg1]

    security:           ["security violation:" :arg1 " (refer to SECURE function)"]
    security-level:     ["attempt to lower security to" :arg1]
    security-error:     ["invalid" :arg1 "security policy:" :arg2]

    no-codec:           ["cannot decode or encode (no codec):" :arg1]
    bad-media:          ["bad media data (corrupt image, sound, video)"]
;   would-block:        ["operation on port" :arg1 "would block"]
;   no-action:          ["this type of port does not support the" :arg1 "action"]
;   serial-timeout:     "serial port timeout"
    no-extension:       ["cannot open extension:" :arg1]
    bad-extension:      ["invalid extension format:" :arg1]
    extension-init:     ["extension cannot be initialized (check version):" :arg1]

    symbol-not-found:   ["symbol not found:" :arg1]
    bad-memory:         ["non-accessible memory at" :arg1 "in" :arg2]
    no-external-storage: ["no external storage in the series"]
    already-destroyed:  ["storage at" :arg1 "already destroyed"]
]
